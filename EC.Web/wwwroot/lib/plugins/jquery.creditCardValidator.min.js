(function(){var n,t=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};n=jQuery;n.fn.validateCreditCard=function(i,r){var s,f,u,e,l,a,v,y,o,p,h,w,c;for(e=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}],s=!1,i&&(typeof i=="object"?(r=i,s=!1,i=null):typeof i=="function"&&(s=!0)),r==null&&(r={}),r.accept==null&&(r.accept=function(){var n,i,t;for(t=[],n=0,i=e.length;n<i;n++)f=e[n],t.push(f.name);return t}()),c=r.accept,h=0,w=c.length;h<w;h++)if(u=c[h],t.call(function(){var n,i,t;for(t=[],n=0,i=e.length;n<i;n++)f=e[n],t.push(f.name);return t}(),u)<0)throw"Credit card type '"+u+"' is not supported";if(l=function(n){var i,s,o;for(o=function(){var n,u,o,i;for(i=[],n=0,u=e.length;n<u;n++)f=e[n],(o=f.name,t.call(r.accept,o)>=0)&&i.push(f);return i}(),i=0,s=o.length;i<s;i++)if(u=o[i],n.match(u.pattern))return u;return null},v=function(n){var t,i,r,u,e,f;for(r=0,f=n.split("").reverse(),i=u=0,e=f.length;u<e;i=++u)t=f[i],t=+t,i%2?(t*=2,r+=t<10?t:t-9):r+=t;return r%10==0},a=function(n,i){var r;return r=n.length,t.call(i.valid_length,r)>=0},p=function(){return function(n){var t,i;return u=l(n),i=!1,t=!1,u!=null&&(i=v(n),t=a(n,u)),{card_type:u,valid:i&&t,luhn_valid:i,length_valid:t}}}(this),o=function(t){return function(){var i;return i=y(n(t).val()),p(i)}}(this),y=function(n){return n.replace(/[ -]/g,"")},!s)return o();this.on("input.jccv",function(t){return function(){return n(t).off("keyup.jccv"),i.call(t,o())}}(this));this.on("keyup.jccv",function(n){return function(){return i.call(n,o())}}(this));return i.call(this,o()),this}}).call(this);